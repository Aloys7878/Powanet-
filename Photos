<!-- POWANET Networks Grid — ready to paste into Pi App Studio (Custom HTML) -->
<style>
  :root{
    --bg:#071022; --card:#0f1724; --muted:#9aa7b2; --accent:#00e5ff; --text:#e6f0f6;
  }
  .light-theme{--bg:#f6f9fc;--card:#ffffff;--muted:#6b7a86;--accent:#0077cc;--text:#071127}
  body{background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial,sans-serif;margin:0;padding:0}
  .pn-wrap{max-width:1100px;margin:14px auto;padding:16px}
  .pn-top{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .pn-title{font-size:20px;color:var(--accent);font-weight:700}
  .pn-sub{color:var(--muted);font-size:13px;margin-top:4px}
  .pn-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:14px}
  @media(min-width:720px){.pn-grid{grid-template-columns:repeat(4,1fr)}}
  .pn-card{background:var(--card);border-radius:12px;padding:10px;display:flex;flex-direction:column;align-items:stretch;box-shadow:0 6px 18px rgba(2,6,23,0.55)}
  .pn-img{width:100%;height:140px;object-fit:cover;border-radius:8px;background:#071022}
  .pn-name{margin-top:10px;font-weight:700}
  .pn-status{font-size:13px;color:var(--muted);margin-top:6px}
  .pn-btn{margin-top:10px;padding:8px;border-radius:8px;border:0;background:var(--accent);color:#001;font-weight:700;cursor:pointer}
  .theme-toggle{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text)}
  .small-muted{font-size:12px;color:var(--muted)}
  /* Loading shimmer */
  .shimmer{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.05), rgba(255,255,255,0.02)); animation:sh 1.2s infinite;}
  @keyframes sh{0%{background-position:-200px 0}100%{background-position:200px 0}}
</style>

<div id="powanet-net" class="pn-wrap" aria-live="polite">
  <div class="pn-top">
    <div>
      <div class="pn-title">POWANET — Global Networks</div>
      <div class="pn-sub">25+ networks • Testnet demo • Tap a card to open • Auto images (Unsplash)</div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="themeToggle" class="theme-toggle" aria-pressed="false">Toggle Theme</button>
      <button id="refreshImages" class="theme-toggle" title="Reload images">Reload</button>
    </div>
  </div>

  <div id="netGrid" class="pn-grid" role="list" aria-label="POWANET Networks">
    <!-- JS will inject cards here -->
  </div>

  <div style="margin-top:14px;color:var(--muted);font-size:13px">
    <span class="small-muted">Demo EGO chat:</span>
    <button id="openEgo" class="pn-btn" style="background:#fff;color:#001;margin-left:8px;font-weight:700">Open EGO Chat</button>
    <span style="margin-left:12px;color:var(--muted)">• EGO uses endpoint <code>/api/ai</code> (connect your AI provider there)</span>
  </div>
</div>

<script>
(() => {
  // Anti-black-screen safety: ensure visible quickly
  try { document.getElementById('powanet-net').style.visibility='visible'; } catch(e){}

  // Networks data (25) with Unsplash thematic images
  const networks = [
    {id:'health', name:'HealthNet', img:'https://source.unsplash.com/1200x800/?health,clinic', status:'online'},
    {id:'eco', name:'EcoNet', img:'https://source.unsplash.com/1200x800/?nature,forest', status:'online'},
    {id:'edu', name:'EduNet', img:'https://source.unsplash.com/1200x800/?education,classroom', status:'updating'},
    {id:'agri', name:'AgriNet', img:'https://source.unsplash.com/1200x800/?agriculture,farm', status:'online'},
    {id:'fin', name:'FinNet', img:'https://source.unsplash.com/1200x800/?finance,bank', status:'testing'},
    {id:'gov', name:'GovNet', img:'https://source.unsplash.com/1200x800/?government,building', status:'offline'},
    {id:'tech', name:'TechNet', img:'https://source.unsplash.com/1200x800/?technology,data', status:'online'},
    {id:'trade', name:'TradeNet', img:'https://source.unsplash.com/1200x800/?market,shop', status:'online'},
    {id:'energy', name:'EnergyNet', img:'https://source.unsplash.com/1200x800/?energy,solar', status:'online'},
    {id:'city', name:'CityNet', img:'https://source.unsplash.com/1200x800/?city,skyline', status:'online'},
    {id:'trans', name:'TransNet', img:'https://source.unsplash.com/1200x800/?transport,logistics', status:'online'},
    {id:'water', name:'WaterNet', img:'https://source.unsplash.com/1200x800/?water,river', status:'online'},
    {id:'food', name:'FoodNet', img:'https://source.unsplash.com/1200x800/?food,market', status:'online'},
    {id:'safe', name:'SafeNet', img:'https://source.unsplash.com/1200x800/?safety,security', status:'online'},
    {id:'com', name:'ComNet', img:'https://source.unsplash.com/1200x800/?communications,antenna', status:'updating'},
    {id:'biz', name:'BizNet', img:'https://source.unsplash.com/1200x800/?business,office', status:'online'},
    {id:'art', name:'ArtNet', img:'https://source.unsplash.com/1200x800/?art,studio', status:'online'},
    {id:'faith', name:'FaithNet', img:'https://source.unsplash.com/1200x800/?faith,temple', status:'online'},
    {id:'media', name:'MediaNet', img:'https://source.unsplash.com/1200x800/?media,news', status:'online'},
    {id:'build', name:'BuildNet', img:'https://source.unsplash.com/1200x800/?construction,architecture', status:'online'},
    {id:'air', name:'AirNet', img:'https://source.unsplash.com/1200x800/?airplane,airport', status:'online'},
    {id:'sea', name:'SeaNet', img:'https://source.unsplash.com/1200x800/?ship,harbor', status:'online'},
    {id:'ai', name:'AIHub', img:'https://source.unsplash.com/1200x800/?artificial-intelligence,robot', status:'testing'},
    {id:'crypto', name:'CryptoNet', img:'https://source.unsplash.com/1200x800/?crypto,blockchain', status:'updating'},
    {id:'peace', name:'PeaceNet', img:'https://source.unsplash.com/1200x800/?peace,globe', status:'online'}
  ];

  const grid = document.getElementById('netGrid');

  function createCard(n){
    const div = document.createElement('div');
    div.className = 'pn-card';
    div.setAttribute('role','listitem');
    div.innerHTML = `
      <div class="shimmer" style="height:140px;border-radius:8px;overflow:hidden;position:relative;">
        <img class="pn-img" alt="${n.name}" data-src="${n.img}" aria-label="${n.name} image"/>
      </div>
      <div class="pn-name">${n.name}</div>
      <div class="pn-status">Status: <strong>${n.status}</strong></div>
      <button class="pn-btn" data-id="${n.id}">Open</button>
    `;
    return div;
  }

  // inject
  networks.forEach(n=>{
    grid.appendChild(createCard(n));
  });

  // lazy load images + fallback to placeholder or GitHub-hosted images if your own exist
  function loadImages(){
    document.querySelectorAll('.pn-img').forEach(img=>{
      const src = img.dataset.src;
      if(!img.src || img.src !== src) img.src = src;
      img.onload = () => { img.parentElement.classList.remove('shimmer'); }
      img.onerror = () => {
        // fallback: check for a GitHub raw path pattern (optional replacement)
        const githubFallback = `https://raw.githubusercontent.com/your-username/your-repo/main/assets/${encodeURIComponent(img.alt)}.jpg`;
        img.onerror = null;
        img.src = githubFallback;
        // final fallback
        img.onerror = () => img.src = 'https://via.placeholder.com/1200x800?text=' + encodeURIComponent(img.alt);
      };
    });
  }

  // initial load
  setTimeout(loadImages, 150);

  // open network demo action
  grid.addEventListener('click', e=>{
    const btn = e.target.closest('button[data-id]');
    if(!btn) return;
    const id = btn.dataset.id;
    // open modal or navigate — for demo we alert
    alert('Opening ' + id + ' (Testnet demo). To connect real API, implement /network/' + id + ' endpoints.');
  });

  // theme toggle
  const themeToggle = document.getElementById('themeToggle');
  themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('light-theme');
    const pressed = document.body.classList.contains('light-theme');
    themeToggle.setAttribute('aria-pressed', pressed ? 'true' : 'false');
  });

  document.getElementById('refreshImages').addEventListener('click', () => {
    loadImages();
    alert('Images reloading (Unsplash will return fresh images).');
  });

  // EGO chat open (demo): opens new window to /api/ai or your demo endpoint
  document.getElementById('openEgo').addEventListener('click', ()=>{
    // prefer opening in new tab; Pi Browser may handle differently
    window.open('/api/ai', '_blank');
  });

  // Anti-hide / anti-black-screen minimal protection
  window.powanetProtect = true;
  (function protect(){
    try{
      const root = document.getElementById('powanet-net');
      if(root) { root.style.visibility='visible'; root.style.opacity=1; }
    }catch(err){}
    // run periodically to ensure visible
    setTimeout(protect, 3000);
  })();

})();
</script>
